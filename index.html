<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Forca - Gloss√°rio Bling</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@900&family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .font-roboto-slab {
            font-family: 'Roboto Slab', serif;
        }
        .letter-box {
            width: 40px;
            height: 40px;
            border-bottom: 3px solid #16a34a; /* green-600 */
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            margin: 4px;
            text-transform: uppercase;
            font-weight: 600;
            color: #1f2937;
        }
        .space-box {
            width: 20px;
            height: 40px;
            display: inline-block;
        }
        @media (min-width: 640px) {
            .letter-box {
                width: 50px;
                height: 50px;
                font-size: 2rem;
            }
            .space-box {
                height: 50px;
            }
        }
        .keyboard-btn {
            transition: all 0.2s ease-in-out;
        }
        .keyboard-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .hangman-part, .face-part {
            stroke: #1f2937;
            stroke-width: 3;
            fill: none;
            stroke-linecap: round;
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
        }
        .modal-content, .start-screen-content, .final-victory-content {
            animation: popIn 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        }
        .modal-winner {
            background: linear-gradient(135deg, #22c55e, #10b981);
            color: white;
            border: 4px solid #facc15;
            box-shadow: 0 0 20px rgba(250, 204, 21, 0.6);
        }
        .modal-winner #modal-title {
            color: white;
        }
        .modal-winner #correct-word {
            color: #ffffff;
        }
        .modal-winner .text-gray-600 {
             color: #d1fae5;
        }
        .modal-winner #word-definition {
            color: #ffffff;
            font-size: 1.125rem;
            line-height: 1.75rem;
            font-weight: 600;
        }
        .modal-winner #play-again-btn {
            background-color: white;
            color: #15803d;
            font-weight: 700;
        }
        .modal-winner #play-again-btn:hover {
            background-color: #f0fdf4;
        }

        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.8); }
            80% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-emerald-900 via-green-900 to-gray-900 flex flex-col items-center justify-center min-h-screen p-4 overflow-hidden">

    <!-- Tela de In√≠cio -->
    <div id="start-screen" class="w-full max-w-2xl mx-auto text-center">
        <h1 class="font-roboto-slab text-6xl sm:text-7xl font-black text-white uppercase tracking-wide" style="text-shadow: 0 2px 4px rgba(0,0,0,0.5);">Jogo da Forca</h1>
        <h2 class="font-roboto-slab text-4xl sm:text-5xl font-black text-green-300 uppercase tracking-wider mb-8" style="text-shadow: 0 2px 4px rgba(0,0,0,0.5);">Bling</h2>
        <div class="start-screen-content bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-2xl border border-white/20 relative">
            <div class="text-left text-gray-600 space-y-4 mb-8">
                <h3 class="text-xl font-bold text-gray-800 text-center">REGRAS DO JOGO</h3>
                <p><span class="font-bold text-green-600">üéØ Objetivo:</span> Adivinhe a palavra ou express√£o do universo Bling letra por letra.</p>
                <p><span class="font-bold text-green-600">üí° Aprendizado:</span> Ao acertar a palavra, seu significado √© revelado. Aprenda e domine os termos!</p>
                <p><span class="font-bold text-green-600">üèÜ Como Vencer:</span> Alcance uma sequ√™ncia de <span class="font-bold text-xl">20 vit√≥rias</span> para zerar o jogo e provar que voc√™ √© um mestre!</p>
                <p><span class="font-bold text-red-600">‚ö†Ô∏è Cuidado:</span> Se voc√™ errar 6 letras, voc√™ perde a rodada e sua sequ√™ncia de vit√≥rias √© zerada!</p>
            </div>
            <button id="start-game-btn" class="w-full bg-green-600 text-white font-bold py-4 px-4 rounded-lg text-xl hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50 transform hover:scale-105 transition-transform">
                COME√áAR
            </button>
            <div class="absolute bottom-2 right-3 text-xs text-gray-400">
                Vers√£o 1.02
            </div>
            <div class="absolute bottom-2 left-3 text-xs text-gray-500">
                Desenvolvido por <a href="https://github.com/isaacmarquetti" target="_blank" class="font-semibold text-green-600 hover:underline">Isaac Marquetti</a>
            </div>
        </div>
    </div>
    
    <!-- Tela Principal do Jogo -->
    <div id="game-screen" class="hidden w-full max-w-7xl mx-auto">
        <div class="relative bg-white/90 backdrop-blur-sm p-6 sm:p-8 rounded-2xl shadow-2xl border border-white/20">
            <!-- Contador de Sequ√™ncia de Vit√≥rias -->
            <div class="absolute top-4 right-4 sm:top-6 sm:right-6 flex flex-col items-end space-y-2">
                <div id="level-display" class="bg-gray-700 text-white p-2 px-4 rounded-full shadow-lg flex items-center gap-2 justify-end">
                    <!-- N√≠vel atual ser√° inserido aqui -->
                </div>
                 <div class="bg-amber-400 text-white p-2 px-3 rounded-full shadow-lg flex items-center gap-2 justify-end">
                    <span class="font-bold text-sm">üèÜ Sequ√™ncia</span>
                    <span id="streak-counter" class="font-bold text-lg">0</span>
                </div>
            </div>

            <header class="text-center mb-6">
                <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight bg-gradient-to-r from-green-600 to-emerald-500 bg-clip-text text-transparent drop-shadow-sm uppercase">JOGO DA FORCA</h1>
                <p class="text-green-600 mt-2 font-semibold">Edi√ß√£o Gloss√°rio Bling</p>
            </header>

            <main class="flex flex-col lg:flex-row gap-8">
                <div class="w-full lg:w-1/3 flex items-center justify-center">
                    <svg height="250" width="200" viewBox="0 0 200 250" class="max-w-[200px] w-full">
                        <line x1="10" y1="230" x2="130" y2="230" style="stroke:#4ade80; stroke-width:5" /><line x1="70" y1="230" x2="70" y2="20" style="stroke:#4ade80; stroke-width:5" /><line x1="70" y1="20" x2="150" y2="20" style="stroke:#4ade80; stroke-width:5" /><line x1="150" y1="20" x2="150" y2="50" style="stroke:#4ade80; stroke-width:5" />
                        
                        <!-- Boneco -->
                        <g id="hangman-figure">
                            <circle cx="150" cy="70" r="20" class="hangman-part" id="head" style="stroke-width: 4; fill: #fff;" />
                            <line x1="150" y1="90" x2="150" y2="150" class="hangman-part" id="body" style="stroke-width: 4;" />
                            <line x1="150" y1="110" x2="120" y2="130" class="hangman-part" id="left-arm" style="stroke-width: 4;" />
                            <line x1="150" y1="110" x2="180" y2="130" class="hangman-part" id="right-arm" style="stroke-width: 4;" />
                            <line x1="150" y1="150" x2="120" y2="180" class="hangman-part" id="left-leg" style="stroke-width: 4;" />
                            <line x1="150" y1="150" x2="180" y2="180" class="hangman-part" id="right-leg" style="stroke-width: 4;" />
                            
                            <!-- Express√µes Faciais -->
                            <g id="face-neutral" class="face-part"><circle cx="143" cy="68" r="2"/><circle cx="157" cy="68" r="2"/><line x1="145" y1="78" x2="155" y2="78"/></g>
                            <g id="face-worried" class="face-part"><circle cx="143" cy="68" r="2"/><circle cx="157" cy="68" r="2"/><path d="M 145 78 Q 150 75 155 78"/><path d="M 143 71 C 140 75, 140 80, 143 82 C 146 80, 146 75, 143 71" style="fill:#3b82f6; stroke: none;"/></g>
                            <g id="face-despair" class="face-part"><circle cx="143" cy="68" r="2.5"/><circle cx="157" cy="68" r="2.5"/><ellipse cx="150" cy="80" rx="7" ry="4"/></g>
                            <g id="face-dead" class="face-part" style="stroke-width: 4;"><line x1="140" y1="65" x2="148" y2="73"/><line x1="148" y1="65" x2="140" y2="73"/><line x1="154" y1="65" x2="162" y2="73"/><line x1="162" y1="65" x2="154" y2="73"/></g>
                            <g id="face-happy" class="face-part"><circle cx="143" cy="68" r="2"/><circle cx="157" cy="68" r="2"/><path d="M 145 78 Q 150 83 155 78"/></g>
                        </g>
                    </svg>
                </div>
                <div class="w-full lg:w-2/3 flex flex-col justify-between">
                    <div>
                        <div id="word-container" class="flex flex-wrap justify-center items-center mb-6 min-h-[50px]"></div>
                        <div id="keyboard-container" class="flex flex-col items-center gap-2"></div>
                    </div>
                    <div class="text-center mt-6">
                         <p class="text-sm text-gray-500">Erros: <span id="wrong-guesses" class="font-bold">0</span> de 6</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal de Fim de Jogo (Vit√≥ria/Derrota normal) -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden">
        <div id="modal-content-box" class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
            <div id="icon-container" class="mb-4"></div>
            <h2 id="modal-title" class="text-3xl font-bold mb-4"></h2>
            <div class="mb-6 text-left">
                <p class="text-gray-600">A palavra era:</p>
                <p id="correct-word" class="text-2xl font-semibold text-green-600 mb-4"></p>
                <div id="definition-container" class="hidden">
                    <p class="text-gray-600">Significado:</p>
                    <p id="word-definition"></p>
                </div>
            </div>
            <div id="modal-buttons" class="w-full space-y-2"></div>
        </div>
    </div>
    
    <!-- Modal de Level Up -->
    <div id="level-up-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
            <div id="level-up-icon" class="text-7xl mb-4"></div>
            <h2 id="level-up-title" class="text-3xl font-bold mb-4"></h2>
            <p id="level-up-message" class="text-gray-600 mb-6"></p>
            <button id="level-up-continue-btn" class="w-full bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700">Continuar</button>
        </div>
    </div>

    <!-- Tela de Vit√≥ria Final (20 vit√≥rias) -->
    <div id="final-victory-screen" class="hidden fixed inset-0 bg-gradient-to-br from-emerald-900 via-green-900 to-gray-900 flex flex-col items-center justify-center p-4 text-white text-center">
        <div class="final-victory-content">
            <div class="text-8xl mb-4">üéâüëëüéâ</div>
            <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight text-amber-300 drop-shadow-lg">MESTRE DO BLING!</h1>
            <p class="text-xl mt-4 max-w-2xl">Parab√©ns, voc√™ conhece muito bem os termos utilizados no sistema Bling.</p>
            <p class="text-lg mt-2">Voc√™ alcan√ßou <span class="font-bold text-2xl text-amber-300">20</span> vit√≥rias seguidas!</p>
            <button id="restart-game-btn" class="mt-8 bg-amber-400 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-amber-500 focus:outline-none focus:ring-4 focus:ring-amber-300 focus:ring-opacity-50 transform hover:scale-105 transition-transform">
                Jogar Novamente
            </button>
        </div>
    </div>

    <script>
        // --- DADOS DO GLOSS√ÅRIO (LISTA COMPLETA) ---
        const glossary = [
            { term: "Access token", definition: "(API) Chave de acesso com tempo de expira√ß√£o de 6 horas." },
            { term: "Alfa", definition: "Vers√£o 'crua' e s√≠ncrona do sistema, utilizada internamente para identificar erros." },
            { term: "Alias de Pagamento", definition: "Identificador da forma de pagamento no canal de venda, usado para importar formas de pagamento com parcelas corretas automaticamente." },
            { term: "Alias Log√≠stico", definition: "C√≥digo que conecta a log√≠stica ao pedido de venda importado, automatizando a sele√ß√£o do servi√ßo de entrega." },
            { term: "Ambiente de Conting√™ncia", definition: "Modo de emiss√£o de NF-e quando a SEFAZ est√° inoperante." },
            { term: "API", definition: "Interface que permite a troca de dados entre sistemas para automa√ß√£o e integra√ß√£o personalizada." },
            { term: "ASIN", definition: "Composi√ß√£o do identificador de produto da Amazon, incluindo SKU, GTIN, marca, categoria, entre outros." },
            { term: "Authorization code", definition: "C√≥digo de autoriza√ß√£o com tempo de expira√ß√£o de 1 minuto, usado para obter tokens pela primeira vez." },
            { term: "Balancete", definition: "Relat√≥rio financeiro que permite exibir e comparar saldos de contas em diferentes per√≠odos, √∫til para verificar a movimenta√ß√£o do Caixa e Bancos." },
            { term: "Balan√ßo de Estoque", definition: "Atualiza o saldo do estoque, substituindo o valor anterior." },
            { term: "Base de Conhecimento", definition: "Fonte de consulta para construir respostas, n√£o uma base de respostas prontas." },
            { term: "Beta", definition: "Vers√£o do sistema para testadores, onde atualiza√ß√µes s√£o lan√ßadas primeiro para identifica√ß√£o de erros." },
            { term: "Bling Conta", definition: "Uma conta digital integrada ao Bling, dispon√≠vel para planos espec√≠ficos, que permite gerar e pagar boletos, fazer transfer√™ncias Pix e TED, e gerenciar saldo de forma centralizada." },
            { term: "Caixa e Bancos", definition: "Menu onde s√£o registrados e visualizados os recebimentos e pagamentos, ap√≥s a baixa das contas." },
            { term: "Campos Customizados", definition: "Atributos espec√≠ficos exigidos pelas lojas virtuais e marketplaces para os produtos." },
            { term: "Carta de Corre√ß√£o", definition: "Permite corrigir dados do transportador, CFOP (se n√£o mudar natureza de impostos) e C√≥digo da Situa√ß√£o Tribut√°ria (se n√£o alterar valores fiscais). N√£o corrige endere√ßo do destinat√°rio." },
            { term: "Categoriza√ß√£o de Tickets", definition: "Importante para o time de produto planejar melhorias no sistema." },
            { term: "Central de Ajuda", definition: "Cont√©m artigos que servem de base para criar respostas e auxiliar na compreens√£o." },
            { term: "Certificado Digital", definition: "Identidade eletr√¥nica da empresa, obrigat√≥ria para emiss√£o de notas fiscais." },
            { term: "Client ID", definition: "(API) Identificador do cliente." },
            { term: "Client secret", definition: "(API) Chave secreta do cliente." },
            { term: "CNAE", definition: "(Classifica√ß√£o Nacional de Atividades Econ√¥micas) O c√≥digo que identifica a atividade econ√¥mica principal de uma empresa, relevante para configura√ß√µes fiscais em servi√ßos e integra√ß√£o com prefeituras." },
            { term: "C√≥digo (SKU)", definition: "O c√≥digo de identifica√ß√£o √∫nico do produto (Stock Keeping Unit), essencial para controle de estoque e vendas, podendo ser manual ou sequencial." },
            { term: "Com√©rcio", definition: "Atividade relacionada √† distribui√ß√£o de produtos no mercado interno e externo, incluindo varejista, atacadista, independente, integrado, entre outros." },
            { term: "Condi√ß√£o de pagamento", definition: "Configura√ß√µes que definem como o pagamento ser√° dividido e os prazos de vencimento (ex: √† vista, 30/60 dias, 3x no cart√£o)." },
            { term: "Confer√™ncia de Estoque", definition: "Ferramenta para contagem e ajuste do estoque, requer SKU ou c√≥digo de barras no produto." },
            { term: "Contas a Pagar", definition: "M√≥dulo para gerenciar todas as obriga√ß√µes financeiras que a empresa tem com fornecedores, impostos e outras entidades." },
            { term: "Contas a Receber", definition: "M√≥dulo para gerenciar todos os valores que a empresa tem a receber de clientes por vendas ou servi√ßos prestados." },
            { term: "Controle de Caixa", definition: "Destinado a registrar movimenta√ß√µes financeiras do Frente de Caixa." },
            { term: "Controle de Estoques", definition: "O m√≥dulo principal para gerenciar os saldos de estoque dos produtos e analisar o hist√≥rico de todas as movimenta√ß√µes." },
            { term: "Cubagem Autom√°tica", definition: "Par√¢metro que seleciona automaticamente a embalagem ideal com menor volume para os itens do pedido." },
            { term: "Curva ABC", definition: "Ferramenta de classifica√ß√£o de produtos que identifica os itens de maior impacto para os resultados da empresa, baseando-se em crit√©rios como giro de estoque, lucratividade e representatividade no faturamento." },
            { term: "DANFE Simplificado", definition: "Nota fiscal resumida, pode ser impressa junto com a etiqueta de transporte." },
            { term: "DBA", definition: "Delivery by Amazon, ferramenta de entrega da Amazon que agiliza o processo de envio." },
            { term: "Dep√≥sitos de estoque", definition: "Funcionalidade que permite gerenciar m√∫ltiplos locais f√≠sicos de armazenamento de produtos, como diferentes lojas, armaz√©ns ou centros de distribui√ß√£o." },
            { term: "DRE", definition: "(Demonstrativo de Resultado do Exerc√≠cio) Relat√≥rio financeiro que utiliza categorias de receitas e despesas para organizar registros financeiros e permitir consultas sobre o desempenho da empresa." },
            { term: "EFD Contribui√ß√µes", definition: "Um arquivo digital da apura√ß√£o do PIS e COFINS, obrigat√≥rio para empresas do Lucro Real e Presumido, entregue mensalmente." },
            { term: "EFD ICMS/IPI", definition: "Um arquivo digital da apura√ß√£o do ICMS e IPI, obrigat√≥rio para empresas do Lucro Real e Presumido, entregue mensalmente com prazo definido pelo estado." },
            { term: "ERP", definition: "Sistema de software que gerencia toda a empresa, automatizando processos financeiros, de RH, produ√ß√£o, entre outros." },
            { term: "Estoque Virtual", definition: "O saldo da composi√ß√£o √© baseado no estoque dos componentes, utilizando a menor quantidade dispon√≠vel, e n√£o pode ser alterado." },
            { term: "Etiqueta de envio", definition: "Documento gerado para identificar o volume a ser despachado, contendo dados do destinat√°rio, remetente, servi√ßo log√≠stico, entre outras informa√ß√µes." },
            { term: "Finalidade", definition: "(Nota Fiscal) Campo que indica o prop√≥sito espec√≠fico da emiss√£o da nota fiscal, como NF-e normal, complementar, de ajuste ou devolu√ß√£o de mercadoria." },
            { term: "Fluxo de caixa", definition: "Relat√≥rio financeiro que permite analisar o movimento de entradas e sa√≠das de dinheiro na empresa ao longo do tempo, considerando diversos par√¢metros." },
            { term: "Formato Jur√≠dico", definition: "A estrutura legal da empresa, como ME, EPP, EI, EIRELI, SA ou LTDA, que define aspectos como faturamento m√°ximo, regime de s√≥cios e responsabilidade legal." },
            { term: "Frete por conta", definition: "Campo na nota fiscal que indica quem √© o respons√°vel financeiro pelo custo do transporte (Remetente (CIF), Destinat√°rio (FOB), Terceiros, etc.)." },
            { term: "Fulfillment", definition: "Modalidade de venda onde a plataforma √© respons√°vel pelo envio da mercadoria ao cliente." },
            { term: "Gerenciador de Transi√ß√µes", definition: "Automa√ß√£o que permite lan√ßar estoque e contas, ou estorn√°-los, de acordo com as situa√ß√µes dos pedidos (ex: de 'Em Aberto' para 'Atendido' ou 'Cancelado')." },
            { term: "Gest√£o de Estoque", definition: "A administra√ß√£o eficiente das mercadorias para equilibrar compras, armazenagem e entregas, controlar entradas e consumo, e otimizar o ciclo da mercadoria." },
            { term: "Giro de estoque", definition: "Um dos indicadores de desempenho mais relevantes, mede a velocidade com que o estoque √© renovado atrav√©s das vendas em um determinado per√≠odo." },
            { term: "GTIN", definition: "C√≥digo de barras utilizado para identificar produtos." },
            { term: "Hub", definition: "Dispositivo que centraliza conex√µes e permite comunica√ß√£o com diversas plataformas." },
            { term: "ICMS", definition: "(Imposto sobre Circula√ß√£o de Mercadorias e Servi√ßos) Um imposto estadual que incide sobre a circula√ß√£o de mercadorias e a presta√ß√£o de servi√ßos de transporte e comunica√ß√£o." },
            { term: "ID na Loja", definition: "C√≥digo alfanum√©rico respons√°vel pelo v√≠nculo multiloja dos produtos do Bling com a loja virtual." },
            { term: "Inscri√ß√£o Estadual", definition: "Um registro fiscal que identifica a empresa como contribuinte do ICMS no estado, obrigat√≥rio para emiss√£o de NF-e, com particularidades para MEI." },
            { term: "Invent√°rio", definition: "O processo de sistematizar a movimenta√ß√£o do estoque atrav√©s de normas de entrada e sa√≠da, e de verificar fisicamente as quantidades para ter informa√ß√µes precisas sobre a quantidade e valor financeiro de cada item." },
            { term: "Lan√ßamentos de Estoque", definition: "Registros detalhados que representam todas as movimenta√ß√µes de entrada, sa√≠da ou balan√ßo que alteram o saldo de estoque de um produto." },
            { term: "Limite de cr√©dito", definition: "Valor m√°ximo de cr√©dito que pode ser definido para clientes no cadastro, geralmente na se√ß√£o Financeiro." },
            { term: "Log√≠stica Reversa", definition: "Facilita a troca e devolu√ß√£o de vendas online sem custo para o consumidor. √â poss√≠vel gerar um c√≥digo de revers√£o via Correios e Envios por Melhor Envio." },
            { term: "Lucro Presumido", definition: "Uma forma de tributa√ß√£o que calcula o IRPJ e CSLL com base em margens de lucro predefinidas para o ramo de atividade da empresa." },
            { term: "Lucro Real", definition: "Uma forma de tributa√ß√£o que calcula o IRPJ e CSLL com base no Lucro L√≠quido real apurado pela empresa, permitindo apropria√ß√£o de cr√©ditos de PIS/COFINS." },
            { term: "Marketplace", definition: "Plataforma online que re√∫ne lojistas, como um shopping center virtual." },
            { term: "Natureza de Opera√ß√£o", definition: "Uma configura√ß√£o fiscal que define as caracter√≠sticas tribut√°rias de uma opera√ß√£o (venda, compra, devolu√ß√£o, remessa, etc.), incluindo CFOPs e situa√ß√µes tribut√°rias." },
            { term: "NCM", definition: "(Nomenclatura Comum do Mercosul) Campo obrigat√≥rio para emiss√£o de nota fiscal, usado para categoriza√ß√£o de mercadorias." },
            { term: "NFCe", definition: "Nota fiscal para vendas f√≠sicas, sem obrigatoriedade de CPF do cliente, utilizada em todos os estados brasileiros, exceto SC." },
            { term: "NFe", definition: "Nota fiscal para vendas de e-commerce, marketplace ou para CNPJ." },
            { term: "NFS-e", definition: "(Nota Fiscal de Servi√ßo Eletr√¥nica) Um tipo de nota fiscal emitida para formalizar a presta√ß√£o de servi√ßos, com tributa√ß√£o geralmente vinculada √† prefeitura do munic√≠pio do prestador." },
            { term: "Objeto Log√≠stico", definition: "Necess√°rio inserir um para cada volume a ser enviado ao transportador." },
            { term: "Ordem de Produ√ß√£o", definition: "Requer produto no formato 'Com composi√ß√£o', produ√ß√£o 'Pr√≥pria' e estoque 'F√≠sico', e considera apenas 1 produto por ordem." },
            { term: "Ordem de Servi√ßo", definition: "Um documento para registrar e gerenciar a presta√ß√£o de um servi√ßo, podendo incluir produtos utilizados e ser vinculada a notas fiscais." },
            { term: "Origem", definition: "Campo obrigat√≥rio para emiss√£o de nota fiscal, que define a proced√™ncia do produto." },
            { term: "Painel", definition: "Ambiente administrativo da loja virtual do seller." },
            { term: "Pedidos de Venda", definition: "Documento interno fundamental para registrar uma venda de produtos ou servi√ßos no Bling, podendo ser criado manualmente ou importado." },
            { term: "PIS/COFINS", definition: "(Programa de Integra√ß√£o Social / Contribui√ß√£o para o Financiamento da Seguridade Social) Impostos da esfera federal que incidem sobre o faturamento bruto das empresas, com diferentes regimes (cumulativo ou n√£o cumulativo)." },
            { term: "POST", definition: "M√©todo API que permite cadastrar novos produtos no sistema, aceitando a remo√ß√£o de campos n√£o obrigat√≥rios no JSON." },
            { term: "Propostas Comerciais", definition: "M√≥dulo para criar e gerenciar documentos de oferta de produtos ou servi√ßos a clientes antes da formaliza√ß√£o da venda." },
            { term: "QZ Tray", definition: "Programa usado para comunica√ß√£o com impressoras t√©rmicas (ZPL e PDF) para impress√£o autom√°tica." },
            { term: "Quente", definition: "Vers√£o finalizada e mais est√°vel do sistema, utilizando a URL padr√£o do Bling." },
            { term: "Refresh token", definition: "(API) Chave de acesso com tempo de expira√ß√£o de 30 dias, usada para gerar novos tokens." },
            { term: "Regime Tribut√°rio", definition: "O modelo de tributa√ß√£o que a empresa escolhe para calcular e pagar seus impostos, como Simples Nacional, Lucro Presumido ou Lucro Real." },
            { term: "Remessa", definition: "Envia dados da venda ou nota fiscal do Bling para a log√≠stica, permitindo a impress√£o de etiquetas." },
            { term: "Reserva de Estoque", definition: "Garante um produto para um cliente, independentemente do pagamento, considerando as situa√ß√µes dos pedidos para dar baixa nas lojas virtuais." },
            { term: "Sangria", definition: "(Frente de Caixa) Registra a retirada de valores do caixa." },
            { term: "SAT", definition: "Sistema Autenticador e Transmissor de Cupons Fiscais Eletr√¥nicos, utilizado no estado de S√£o Paulo para NFC-e." },
            { term: "SEFAZ", definition: "Secretaria da Fazenda, √≥rg√£o que fiscaliza receitas/despesas estaduais e controla emiss√£o de NF-e." },
            { term: "Seller", definition: "Termo utilizado para se referir ao cliente (vendedor) do Bling." },
            { term: "Simples Nacional", definition: "Um Regime Especial Unificado de Arrecada√ß√£o de Tributos e Contribui√ß√µes para Microempresas (ME) e Empresas de Pequeno Porte (EPP), com faturamento anual limitado." },
            { term: "SPED", definition: "(Sistema P√∫blico de Escritura√ß√£o Digital) Um sistema de escritura√ß√£o digital que abrange diversas obriga√ß√µes fiscais e cont√°beis eletr√¥nicas, como NF-e, EFD ICMS/IPI e EFD Contribui√ß√µes." },
            { term: "Substitui√ß√£o Tribut√°ria", definition: "(ICMS ST) A cobran√ßa antecipada do ICMS, onde um √∫nico contribuinte (o substituto) recolhe o imposto de toda a cadeia de produ√ß√£o e distribui√ß√£o." },
            { term: "Sugest√£o de melhoria", definition: "Ideias ou solicita√ß√µes de novas funcionalidades ou melhorias em funcionalidades existentes no sistema, que s√£o analisadas para poss√≠vel implementa√ß√£o futura." },
            { term: "Suprimento", definition: "(Frente de Caixa) Registra a inser√ß√£o de valores no caixa." },
            { term: "Tags", definition: "Utilizadas para categorizar internamente os produtos no Bling." },
            { term: "Taxas de Marketplaces", definition: "Taxas cobradas por cada marketplace, como comiss√µes ou fretes." },
            { term: "Tracking", definition: "(C√≥digo de rastreamento) O c√≥digo que permite o acompanhamento da situa√ß√£o de entrega das mercadorias enviadas, gerado a partir do objeto log√≠stico e atualizado automaticamente." },
            { term: "Transfer√™ncia de Estoque", definition: "Pode ser feita em Cadastros > Produtos ou Suprimentos > Controle de Estoque." },
            { term: "URL de Redirecionamento", definition: "Utilizada para receber os c√≥digos necess√°rios para autorizar o token." },
            { term: "V√≠nculo Multiloja", definition: "O m√©todo de v√≠nculo de um produto com uma loja virtual ou marketplace pode variar conforme a integra√ß√£o." },
            { term: "XML de Notas Fiscais", definition: "Arquivo digital que cont√©m todas as informa√ß√µes fiscais da nota." },
            { term: "ZPL", definition: "Formato utilizado para impress√£o de etiquetas 15x10 (impressoras t√©rmicas)." }
        ];

        // --- ELEMENTOS DO DOM ---
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const finalVictoryScreen = document.getElementById('final-victory-screen');
        const startGameBtn = document.getElementById('start-game-btn');
        const restartGameBtn = document.getElementById('restart-game-btn');
        const wordContainer = document.getElementById('word-container');
        const keyboardContainer = document.getElementById('keyboard-container');
        const wrongGuessesEl = document.getElementById('wrong-guesses');
        const streakCounterEl = document.getElementById('streak-counter');
        const levelDisplayEl = document.getElementById('level-display');
        const modal = document.getElementById('modal');
        const modalContentBox = document.getElementById('modal-content-box');
        const iconContainer = document.getElementById('icon-container');
        const modalTitle = document.getElementById('modal-title');
        const correctWordEl = document.getElementById('correct-word');
        const wordDefinitionEl = document.getElementById('word-definition');
        const definitionContainer = document.getElementById('definition-container');
        const modalButtonsContainer = document.getElementById('modal-buttons');
        const levelUpModal = document.getElementById('level-up-modal');
        const levelUpIcon = document.getElementById('level-up-icon');
        const levelUpTitle = document.getElementById('level-up-title');
        const levelUpMessage = document.getElementById('level-up-message');
        const levelUpContinueBtn = document.getElementById('level-up-continue-btn');
        const hangmanParts = ['head', 'body', 'left-arm', 'right-arm', 'left-leg', 'right-leg'];
        const faceParts = ['face-neutral', 'face-worried', 'face-despair', 'face-dead', 'face-happy'];

        // --- ESTADO DO JOGO ---
        let selectedWord;
        let guessedLetters;
        let wrongGuesses;
        let currentStreak = 0;
        let bestStreak = 0;
        let usedWordsInSession = [];
        const MAX_WRONG_GUESSES = 6;
        const WIN_STREAK_GOAL = 20;

        // --- FUN√á√ïES DO JOGO ---

        const getLevel = (streak) => {
            if (streak >= 1 && streak <= 6) return { name: 'Bronze', emoji: 'ü•â', color: 'bg-yellow-600' };
            if (streak >= 7 && streak <= 13) return { name: 'Prata', emoji: 'ü•à', color: 'bg-gray-400' };
            if (streak >= 14 && streak <= 19) return { name: 'Ouro', emoji: 'ü•á', color: 'bg-amber-500' };
            if (streak >= 20) return { name: 'Mestre', emoji: 'üëë', color: 'bg-purple-600' };
            return { name: 'Iniciante', emoji: 'üë∂', color: 'bg-gray-700' };
        };

        const updateStreakDisplay = () => {
            const level = getLevel(bestStreak); // O n√≠vel √© baseado no recorde
            levelDisplayEl.innerHTML = `
                <span class="font-bold text-sm">${level.emoji} ${level.name}</span>
                <span class="font-bold text-lg">${bestStreak}</span>
            `;
            levelDisplayEl.className = `p-2 px-4 rounded-full shadow-lg flex items-center gap-2 justify-end ${level.color} text-white`;
            streakCounterEl.textContent = currentStreak;
        };

        const loadGameData = () => {
            currentStreak = parseInt(localStorage.getItem('hangmanCurrentStreak')) || 0;
            bestStreak = parseInt(localStorage.getItem('hangmanBestStreak')) || 0;
            updateStreakDisplay();
        };

        const normalizeString = (str) => {
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase();
        };
        
        const updateFaceExpression = (expression) => {
            faceParts.forEach(part => {
                const el = document.getElementById(part);
                if (el) el.style.opacity = '0';
            });
            if (expression) {
                const el = document.getElementById(`face-${expression}`);
                if (el) el.style.opacity = '1';
            }
        };

        const startRound = () => {
            loadGameData();
            guessedLetters = new Set();
            wrongGuesses = 0;
            
            let availableWords = glossary.filter(wordObj => !usedWordsInSession.includes(wordObj.term));
            if (availableWords.length === 0) {
                usedWordsInSession = [];
                availableWords = glossary;
            }
            selectedWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            usedWordsInSession.push(selectedWord.term);
            
            renderWord();
            renderKeyboard();
            updateHangmanDrawing();
            wrongGuessesEl.textContent = wrongGuesses;

            modal.classList.add('hidden');
            definitionContainer.classList.add('hidden');
            startScreen.classList.add('hidden');
            finalVictoryScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
        };

        const renderWord = () => {
            wordContainer.innerHTML = '';
            const words = selectedWord.term.split(' ');

            words.forEach((word, index) => {
                const wordWrapper = document.createElement('div');
                wordWrapper.classList.add('inline-flex', 'flex-nowrap');

                const normalizedWord = normalizeString(word);
                normalizedWord.split('').forEach(letter => {
                    const box = document.createElement('div');
                    box.classList.add('letter-box');
                    if (guessedLetters.has(letter) || letter === '-') {
                        box.textContent = letter;
                    }
                    wordWrapper.appendChild(box);
                });
                wordContainer.appendChild(wordWrapper);

                if (index < words.length - 1) {
                    const space = document.createElement('div');
                    space.classList.add('space-box');
                    wordContainer.appendChild(space);
                }
            });
        };

        const renderKeyboard = () => {
            keyboardContainer.innerHTML = '';
            const keysByRow = [
                'ABCDEFGHI',
                'JKLMNOPQR',
                'STUVWXYZ'
            ];

            keysByRow.forEach(rowString => {
                const rowDiv = document.createElement('div');
                rowDiv.classList.add('flex', 'justify-center', 'gap-2');
                rowString.split('').forEach(key => {
                    const button = document.createElement('button');
                    button.textContent = key;
                    button.classList.add('keyboard-btn', 'w-10', 'h-10', 'sm:w-12', 'sm:h-12', 'bg-green-100', 'text-green-800', 'font-bold', 'rounded-lg', 'hover:bg-green-200', 'focus:outline-none', 'focus:ring-2', 'focus:ring-green-500');
                    button.addEventListener('click', () => handleGuess(key));
                    rowDiv.appendChild(button);
                });
                keyboardContainer.appendChild(rowDiv);
            });
        };

        const handleGuess = (letter) => {
            if (guessedLetters.has(letter)) return;
            guessedLetters.add(letter);
            
            const buttons = keyboardContainer.getElementsByTagName('button');
            for (let btn of buttons) {
                if (btn.textContent === letter) {
                    btn.disabled = true;
                    btn.classList.remove('hover:bg-green-200');
                    btn.classList.add('bg-gray-200');
                }
            }

            const normalizedTerm = normalizeString(selectedWord.term);
            if (normalizedTerm.includes(letter)) {
                renderWord();
            } else {
                wrongGuesses++;
                wrongGuessesEl.textContent = wrongGuesses;
                updateHangmanDrawing();
            }
            checkGameStatus();
        };

        const updateHangmanDrawing = () => {
            hangmanParts.forEach((part, index) => {
                document.getElementById(part).style.opacity = (index < wrongGuesses) ? '1' : '0';
            });
            
            switch(wrongGuesses) {
                case 0: updateFaceExpression(null); break;
                case 1: updateFaceExpression('neutral'); break;
                case 3: updateFaceExpression('worried'); break;
                case 5: updateFaceExpression('despair'); break;
                case 6: updateFaceExpression('dead'); break;
            }
        };

        const checkGameStatus = () => {
            const normalizedTerm = normalizeString(selectedWord.term);
            const wordLetters = new Set(normalizedTerm.replace(/[^A-Z]/g, ''));
            const won = [...wordLetters].every(letter => guessedLetters.has(letter));

            if (won) {
                const levelBefore = getLevel(currentStreak);
                currentStreak++;
                const levelAfter = getLevel(currentStreak);

                if (currentStreak > bestStreak) {
                    bestStreak = currentStreak;
                }
                localStorage.setItem('hangmanCurrentStreak', currentStreak);
                localStorage.setItem('hangmanBestStreak', bestStreak);

                if (currentStreak === WIN_STREAK_GOAL) {
                    setTimeout(showFinalVictory, 500);
                } else {
                    setTimeout(() => showModal(true, levelBefore, levelAfter), 500);
                }
            } else if (wrongGuesses >= MAX_WRONG_GUESSES) {
                currentStreak = 0;
                localStorage.setItem('hangmanCurrentStreak', currentStreak);
                updateStreakDisplay();
                setTimeout(() => showModal(false), 500);
            }
        };
        
        const showLevelUpModal = (level) => {
            levelUpIcon.textContent = level.emoji;
            levelUpTitle.textContent = `Voc√™ subiu para o N√≠vel ${level.name}!`;
            if (level.name === 'Prata') {
                levelUpMessage.textContent = 'Que bom que voc√™ evoluiu rumo ao mestre! Vamos l√°, ainda falta muito para subir essa montanha de conhecimento at√© o √∫ltimo n√≠vel.';
            } else if (level.name === 'Ouro') {
                levelUpMessage.textContent = 'Se j√° chegamos at√© aqui, vamos continuar porque falta pouco rumo ao mestre! Vamos l√°!';
            }
            levelUpModal.classList.remove('hidden');
        };

        const showModal = (isWinner, levelBefore, levelAfter) => {
            updateStreakDisplay();
            modalContentBox.classList.remove('modal-winner');
            modalTitle.classList.remove('text-green-600', 'text-red-600');
            iconContainer.innerHTML = '';
            modalButtonsContainer.innerHTML = '';

            if (isWinner) {
                document.getElementById('head').style.opacity = '1';
                updateFaceExpression('happy');
                modalContentBox.classList.add('modal-winner');
                modalTitle.textContent = 'Parab√©ns, voc√™ adivinhou!';
                iconContainer.innerHTML = `<div class="flex justify-center items-center"><span class="text-5xl opacity-70">üèÜ</span><span class="text-7xl mx-2">üèÜ</span><span class="text-5xl opacity-70">üèÜ</span></div>`;
                wordDefinitionEl.textContent = selectedWord.definition;
                definitionContainer.classList.remove('hidden');

                const continueBtn = document.createElement('button');
                continueBtn.textContent = 'Continuar Jogando';
                continueBtn.className = 'w-full bg-white text-green-700 font-bold py-3 px-4 rounded-lg hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transform hover:scale-105 transition-transform';
                continueBtn.addEventListener('click', () => {
                    modal.classList.add('hidden');
                    if(levelBefore.name !== levelAfter.name) {
                        showLevelUpModal(levelAfter);
                    } else {
                        startRound();
                    }
                });
                modalButtonsContainer.appendChild(continueBtn);

            } else {
                modalTitle.textContent = 'Fim de Jogo!';
                modalTitle.classList.add('text-red-600');
                definitionContainer.classList.add('hidden');
                
                const tryAgainBtn = document.createElement('button');
                tryAgainBtn.textContent = 'Tentar Novamente';
                tryAgainBtn.className = 'w-full bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transform hover:scale-105 transition-transform';
                tryAgainBtn.addEventListener('click', startRound);

                const menuBtn = document.createElement('button');
                menuBtn.textContent = 'Ir para o Menu';
                menuBtn.className = 'w-full bg-gray-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 transform hover:scale-105 transition-transform';
                menuBtn.addEventListener('click', goToMenu);

                modalButtonsContainer.appendChild(tryAgainBtn);
                modalButtonsContainer.appendChild(menuBtn);
            }
            correctWordEl.textContent = selectedWord.term;
            modal.classList.remove('hidden');
        };
        
        const showFinalVictory = () => {
            gameScreen.classList.add('hidden');
            finalVictoryScreen.classList.remove('hidden');
        };
        
        const goToMenu = () => {
            usedWordsInSession = [];
            modal.classList.add('hidden');
            gameScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        };

        const resetGame = () => {
            currentStreak = 0;
            usedWordsInSession = [];
            localStorage.setItem('hangmanCurrentStreak', currentStreak);
            finalVictoryScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        };

        // --- EVENT LISTENERS ---
        startGameBtn.addEventListener('click', startRound);
        restartGameBtn.addEventListener('click', resetGame);
        levelUpContinueBtn.addEventListener('click', () => {
            levelUpModal.classList.add('hidden');
            startRound();
        });
        
        document.addEventListener('DOMContentLoaded', loadGameData);
    </script>
</body>
</html>

